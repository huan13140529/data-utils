import{a as $,E as V}from"./element-plus-e5949d74.js";import{h as q,e as p,Z as J,ag as i,aq as M,o as x,c as z,U as e,a as k,O as t,P as A,M as L,S as d}from"./@vue-59822d27.js";import"./lodash-es-21c98b27.js";import"./@vueuse-9e7d8ec8.js";import"./@element-plus-0a425379.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-a36a02e4.js";import"./clipboard-c35e1794.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-73e01a0a.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const R={class:"app-container"},P={style:{"line-height":"32px","margin-top":"10px"}},Z=k("span",{style:{color:"orange","margin-left":"8px"}},"注：以下数据均来自浏览器缓存:LocalStorage，如不手动添加，则列表为空",-1),F={class:"dialog-footer"},se={__name:"Setting",setup(G){const{proxy:N}=q(),o=p([]),v=p(!1),u=p(!1),f=p(""),m=p(!1),r=p({projectId:"",projectName:"",key:"",iv:""}),j=J({projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],key:[{required:!0,message:"请输入key值",trigger:"blur"}],iv:[{required:!0,message:"请输入iv值",trigger:"blur"}]});function _(){m.value=!0;const n=localStorage.getItem("tableData");n?(o.value=JSON.parse(n),setTimeout(()=>{m.value=!1},500)):(o.value=[],setTimeout(()=>{m.value=!1},500),m.value=!1)}function C(n){g(),f.value="编辑项目配置",v.value=!0,u.value=!0,r.value=n}function S(n){$.confirm("确认删除该项目?","系统提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.splice(n,1),localStorage.setItem("tableData",JSON.stringify(o.value)),_(),V({type:"success",message:"删除成功"})}).catch(()=>{V({type:"info",message:"删除失败"})})}function w(){f.value="新增项目配置",v.value=!1,u.value=!0}function I(){g()}function g(){f.value="",v.value=!1,u.value=!1,r.value={projectId:"",projectName:"",key:"",iv:""}}const D=async n=>{N.$refs.formRef.validate((l,h)=>{if(l)if(v.value)localStorage.setItem("tableData",JSON.stringify(o.value)),g(),_();else{const s=[...o.value,Object.assign(r.value,{projectId:o.value.length>0?String(Number(o.value[o.value.length-1].projectId)+1):"0"})];localStorage.setItem("tableData",JSON.stringify(s)),g(),_()}})};return _(),(n,l)=>{const h=i("el-alert"),s=i("el-button"),c=i("el-table-column"),B=i("el-table"),y=i("el-input"),b=i("el-form-item"),E=i("el-form"),O=i("el-dialog"),T=M("loading");return x(),z("div",R,[e(h,{title:"请手动添加项目解密配置，数据将缓存在浏览器中，注意：如果切换浏览器、需要重新添加配置",type:"info","show-icon":"",closable:""}),k("div",P,[e(s,{type:"primary",onClick:w},{default:t(()=>[d("新增")]),_:1}),Z]),A((x(),L(B,{data:o.value,border:"",style:{"margin-top":"10px"}},{default:t(()=>[e(c,{prop:"projectId",label:"项目id",width:"70"}),e(c,{prop:"projectName",label:"项目名称",width:"180"}),e(c,{prop:"key",label:"key值"}),e(c,{prop:"iv",label:"iv值"}),e(c,{label:"操作",width:"160"},{default:t(a=>[e(s,{type:"primary",size:"small",onClick:U=>C(a.row)},{default:t(()=>[d("编辑")]),_:2},1032,["onClick"]),e(s,{type:"danger",size:"small",onClick:U=>S(a.$index)},{default:t(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,m.value]]),e(O,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value=a),title:f.value,width:"400px","before-close":I},{footer:t(()=>[k("span",F,[e(s,{onClick:l[3]||(l[3]=a=>u.value=!1)},{default:t(()=>[d("取消")]),_:1}),e(s,{type:"primary",onClick:D},{default:t(()=>[d(" 确认 ")]),_:1})])]),default:t(()=>[e(E,{model:r.value,"label-width":"80px",rules:j,ref:"formRef"},{default:t(()=>[e(b,{label:"项目名称",prop:"projectName"},{default:t(()=>[e(y,{modelValue:r.value.projectName,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value.projectName=a),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(b,{label:"key值",prop:"key"},{default:t(()=>[e(y,{modelValue:r.value.key,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.key=a),placeholder:"key值"},null,8,["modelValue"])]),_:1}),e(b,{label:"iv值",prop:"iv"},{default:t(()=>[e(y,{modelValue:r.value.iv,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.iv=a),placeholder:"iv值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{se as default};
