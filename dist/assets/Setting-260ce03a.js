import{X as q,aH as c,aF as z,aM as r,aN as J,az as N,q as U,z as e,r as k,bs as l,bu as M,o as A,y as m,bF as F,bC as V}from"./index-f9bc0ae3.js";const L={class:"app-container"},R={style:{"line-height":"32px","margin-top":"10px"}},H=k("span",{style:{color:"orange","margin-left":"8px"}},"注：以下数据均来自浏览器缓存:LocalStorage，如不手动添加，则列表为空",-1),X={class:"dialog-footer"},P={__name:"Setting",setup(G){const{proxy:x}=q(),o=c([]),v=c(!1),u=c(!1),f=c(""),d=c(!1),n=c({projectId:"",projectName:"",key:"",iv:""}),j=z({projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],key:[{required:!0,message:"请输入key值",trigger:"blur"}],iv:[{required:!0,message:"请输入iv值",trigger:"blur"}]});function _(){d.value=!0;const s=localStorage.getItem("tableData");s?(o.value=JSON.parse(s),setTimeout(()=>{d.value=!1},500)):(o.value=[],setTimeout(()=>{d.value=!1},500),d.value=!1)}function C(s){g(),f.value="编辑项目配置",v.value=!0,u.value=!0,n.value=s}function S(s){F.confirm("确认删除该项目?","系统提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.splice(s,1),localStorage.setItem("tableData",JSON.stringify(o.value)),_(),V({type:"success",message:"删除成功"})}).catch(()=>{V({type:"info",message:"删除失败"})})}function w(){f.value="新增项目配置",v.value=!1,u.value=!0}function I(){g()}function g(){f.value="",v.value=!1,u.value=!1,n.value={projectId:"",projectName:"",key:"",iv:""}}const D=async s=>{x.$refs.formRef.validate((t,h)=>{if(t)if(v.value)localStorage.setItem("tableData",JSON.stringify(o.value)),g(),_();else{const i=[...o.value,Object.assign(n.value,{projectId:o.value.length>0?String(Number(o.value[o.value.length-1].projectId)+1):"0"})];localStorage.setItem("tableData",JSON.stringify(i)),g(),_()}})};return _(),(s,t)=>{const h=r("el-alert"),i=r("el-button"),p=r("el-table-column"),B=r("el-table"),b=r("el-input"),y=r("el-form-item"),E=r("el-form"),O=r("el-dialog"),T=J("loading");return N(),U("div",L,[e(h,{title:"请手动添加项目解密配置，数据将缓存在浏览器中，注意：如果切换浏览器、需要重新添加配置",type:"info","show-icon":"",closable:""}),k("div",R,[e(i,{type:"primary",onClick:w},{default:l(()=>[m("新增")]),_:1}),H]),M((N(),A(B,{data:o.value,border:"",style:{"margin-top":"10px"}},{default:l(()=>[e(p,{prop:"projectId",label:"项目id",width:"70"}),e(p,{prop:"projectName",label:"项目名称",width:"180"}),e(p,{prop:"key",label:"key值"}),e(p,{prop:"iv",label:"iv值"}),e(p,{label:"操作",width:"160"},{default:l(a=>[e(i,{type:"primary",size:"small",onClick:$=>C(a.row)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),e(i,{type:"danger",size:"small",onClick:$=>S(a.$index)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,d.value]]),e(O,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=a=>u.value=a),title:f.value,width:"400px","before-close":I},{footer:l(()=>[k("span",X,[e(i,{onClick:t[3]||(t[3]=a=>u.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(i,{type:"primary",onClick:D},{default:l(()=>[m(" 确认 ")]),_:1})])]),default:l(()=>[e(E,{model:n.value,"label-width":"80px",rules:j,ref:"formRef"},{default:l(()=>[e(y,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(b,{modelValue:n.value.projectName,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.projectName=a),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(y,{label:"key值",prop:"key"},{default:l(()=>[e(b,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.key=a),placeholder:"key值"},null,8,["modelValue"])]),_:1}),e(y,{label:"iv值",prop:"iv"},{default:l(()=>[e(b,{modelValue:n.value.iv,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value.iv=a),placeholder:"iv值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{P as default};
