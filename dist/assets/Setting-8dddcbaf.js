import{p as T}from"./options-2e4a48d1.js";import{X as $,aH as c,aF as q,aM as u,aN as z,az as k,q as J,z as e,bs as l,bu as U,o as M,y as m,r as A,bE as R,bC as N}from"./index-7a0dfed4.js";const F={class:"app-container"},H={class:"dialog-footer"},K={__name:"Setting",setup(L){const{proxy:V}=$(),r=c([]),v=c(!1),i=c(!1),f=c(""),p=c(!1),o=c({projectId:"",projectName:"",key:"",iv:""}),j=q({projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],key:[{required:!0,message:"请输入key值",trigger:"blur"}],iv:[{required:!0,message:"请输入iv值",trigger:"blur"}]});function _(){p.value=!0;const n=localStorage.getItem("tableData");n?(r.value=JSON.parse(n),setTimeout(()=>{p.value=!1},500)):(r.value=T,setTimeout(()=>{p.value=!1},500),p.value=!1)}function C(n){g(),f.value="编辑项目配置",v.value=!0,i.value=!0,o.value=n}function x(n){R.confirm("确认删除该项目?","系统提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{r.value.splice(n,1),localStorage.setItem("tableData",JSON.stringify(r.value)),_(),N({type:"success",message:"删除成功"})}).catch(()=>{N({type:"info",message:"删除失败"})})}function h(){f.value="新增项目配置",v.value=!1,i.value=!0}function I(){g()}function g(){f.value="",v.value=!1,i.value=!1,o.value={projectId:"",projectName:"",key:"",iv:""}}const S=async n=>{V.$refs.formRef.validate((t,d)=>{if(t)if(v.value)localStorage.setItem("tableData",JSON.stringify(r.value)),g(),_();else{const s=[...r.value,Object.assign(o.value,{projectId:String(Number(r.value[r.value.length-1].projectId)+1)})];localStorage.setItem("tableData",JSON.stringify(s)),g(),_()}})};return _(),(n,t)=>{const d=u("el-button"),s=u("el-table-column"),w=u("el-table"),b=u("el-input"),y=u("el-form-item"),D=u("el-form"),B=u("el-dialog"),E=z("loading");return k(),J("div",F,[e(d,{type:"primary",onClick:h},{default:l(()=>[m("新增")]),_:1}),U((k(),M(w,{data:r.value,border:"",style:{"margin-top":"20px"}},{default:l(()=>[e(s,{prop:"projectId",label:"项目id",width:"70"}),e(s,{prop:"projectName",label:"项目名称",width:"180"}),e(s,{prop:"key",label:"key值"}),e(s,{prop:"iv",label:"iv值"}),e(s,{label:"操作",width:"160"},{default:l(a=>[e(d,{type:"primary",size:"small",onClick:O=>C(a.row)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",onClick:O=>x(a.$index)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,p.value]]),e(B,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=a=>i.value=a),title:f.value,width:"400px","before-close":I},{footer:l(()=>[A("span",H,[e(d,{onClick:t[3]||(t[3]=a=>i.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(d,{type:"primary",onClick:S},{default:l(()=>[m(" 确认 ")]),_:1})])]),default:l(()=>[e(D,{model:o.value,"label-width":"80px",rules:j,ref:"formRef"},{default:l(()=>[e(y,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(b,{modelValue:o.value.projectName,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.projectName=a),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(y,{label:"key值",prop:"key"},{default:l(()=>[e(b,{modelValue:o.value.key,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.key=a),placeholder:"key值"},null,8,["modelValue"])]),_:1}),e(y,{label:"iv值",prop:"iv"},{default:l(()=>[e(b,{modelValue:o.value.iv,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.iv=a),placeholder:"iv值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{K as default};
