import{X as $,aH as c,aF as q,aM as s,aN as z,az as N,q as J,z as e,bs as l,bu as U,o as M,y as m,r as A,bF as F,bC as V}from"./index-06347d44.js";const R={class:"app-container"},H={class:"dialog-footer"},G={__name:"Setting",setup(L){const{proxy:h}=$(),o=c([]),v=c(!1),i=c(!1),f=c(""),d=c(!1),n=c({projectId:"",projectName:"",key:"",iv:""}),j=q({projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],key:[{required:!0,message:"请输入key值",trigger:"blur"}],iv:[{required:!0,message:"请输入iv值",trigger:"blur"}]});function _(){d.value=!0;const r=localStorage.getItem("tableData");r?(o.value=JSON.parse(r),setTimeout(()=>{d.value=!1},500)):(o.value=[],setTimeout(()=>{d.value=!1},500),d.value=!1)}function x(r){g(),f.value="编辑项目配置",v.value=!0,i.value=!0,n.value=r}function C(r){F.confirm("确认删除该项目?","系统提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.splice(r,1),localStorage.setItem("tableData",JSON.stringify(o.value)),_(),V({type:"success",message:"删除成功"})}).catch(()=>{V({type:"info",message:"删除失败"})})}function w(){f.value="新增项目配置",v.value=!1,i.value=!0}function I(){g()}function g(){f.value="",v.value=!1,i.value=!1,n.value={projectId:"",projectName:"",key:"",iv:""}}const S=async r=>{h.$refs.formRef.validate((t,k)=>{if(t)if(v.value)localStorage.setItem("tableData",JSON.stringify(o.value)),g(),_();else{const u=[...o.value,Object.assign(n.value,{projectId:o.value.length>0?String(Number(o.value[o.value.length-1].projectId)+1):"0"})];localStorage.setItem("tableData",JSON.stringify(u)),g(),_()}})};return _(),(r,t)=>{const k=s("el-alert"),u=s("el-button"),p=s("el-table-column"),D=s("el-table"),b=s("el-input"),y=s("el-form-item"),B=s("el-form"),E=s("el-dialog"),O=z("loading");return N(),J("div",R,[e(k,{title:"请手动添加项目解密配置，数据将缓存在浏览器中，注意：如果切换浏览器、需要重新添加配置",type:"info","show-icon":"",closable:""}),e(u,{type:"primary",onClick:w,style:{"margin-top":"10px"}},{default:l(()=>[m("新增")]),_:1}),U((N(),M(D,{data:o.value,border:"",style:{"margin-top":"10px"}},{default:l(()=>[e(p,{prop:"projectId",label:"项目id",width:"70"}),e(p,{prop:"projectName",label:"项目名称",width:"180"}),e(p,{prop:"key",label:"key值"}),e(p,{prop:"iv",label:"iv值"}),e(p,{label:"操作",width:"160"},{default:l(a=>[e(u,{type:"primary",size:"small",onClick:T=>x(a.row)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),e(u,{type:"danger",size:"small",onClick:T=>C(a.$index)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,d.value]]),e(E,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=a=>i.value=a),title:f.value,width:"400px","before-close":I},{footer:l(()=>[A("span",H,[e(u,{onClick:t[3]||(t[3]=a=>i.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(u,{type:"primary",onClick:S},{default:l(()=>[m(" 确认 ")]),_:1})])]),default:l(()=>[e(B,{model:n.value,"label-width":"80px",rules:j,ref:"formRef"},{default:l(()=>[e(y,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(b,{modelValue:n.value.projectName,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.projectName=a),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(y,{label:"key值",prop:"key"},{default:l(()=>[e(b,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.key=a),placeholder:"key值"},null,8,["modelValue"])]),_:1}),e(y,{label:"iv值",prop:"iv"},{default:l(()=>[e(b,{modelValue:n.value.iv,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value.iv=a),placeholder:"iv值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{G as default};
